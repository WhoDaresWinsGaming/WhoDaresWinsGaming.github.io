<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<meta name="viewport" content="width=device-width, initial-scale=1">
		
		<title>WDW Gaming</title>
		
		<!-- CDN CSS -->
		<link rel="stylesheet" type="text/css" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css">
		<link href="http://fonts.googleapis.com/css?family=Oswald:400,700,300" rel="stylesheet" type="text/css">
		
		<!-- Our CSS -->
		<link href="index.css" rel="stylesheet" type="text/css">
		
		<!-- IE 8 Support: [if lt IE 9]>
			<script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
			<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
		<![endif] -->
	</head>
	<body>
		<main class="container">
			<header>
				<nav class="navbar navbar-inverse">
					<div class="container-fluid">
						<div class="navbar-header">
							<button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar-collapse" aria-expanded="false">
								<span class="sr-only">Toggle navigation</span>
								<span class="icon-bar"></span>
								<span class="icon-bar"></span>
								<span class="icon-bar"></span>
							</button>
							<a class="navbar-brand" href="/">WDW Gaming</a>
						</div>
						<div class="collapse navbar-collapse" id="navbar-collapse">
							<ul class="nav navbar-nav">
								<li><a href="/">Home</a></li>
								<li><a href="http://steamcommunity.com/groups/WhoDaresWinsGaming-G">Steam Community</a></li>
								<li><a href="#ip">Teamspeak</a></li>
							</ul>
						</div>
					</div>
				</nav>
			</header>
			<div id="page">
				<div class="jumbotron">
				  <h1>Who Dares <strong>Wins</strong></h1>
				  <p>Raise your donger. Grab it by the shaft and join our <del>cult</del> clan. We have a grill, a coder, a fat bloke and a midget. We also have a super-good-awesome-great Teamspeak server, of which the IP is below.</p>
				</div>
				<div id="ip" class="well well-lg">
					<h1></h1>
					<h2></h2>
					<h5>This IP automatically updates every 5 minutes</h5>
					<h6>If it's broken blame Grnt</h6>
				</div>
			</div>
			<footer>This sexy, sexy website was created by Xenxier</footer>
		</main>
	<!-- CDN Javascript -->
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
	<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js"></script>
	<script src="http://timeago.yarp.com/jquery.timeago.js"></script>
	
	<script>
		// http://stackoverflow.com/a/13329900
		function getFileFromServer(url, doneCallback) {
			var xhr;

			xhr = new XMLHttpRequest();
			xhr.onreadystatechange = handleStateChange;
			xhr.open("GET", url, true);
			xhr.send();

			function handleStateChange() {
				if (xhr.readyState === 4) {
					doneCallback(xhr.status == 200 ? xhr.responseText : null);
				}
			}
		}
		
		jQuery(document).ready(function() {
  			jQuery("abbr.timeago").timeago();
  			
			// Get the IP
			getFileFromServer("https://rawgit.com/WhoDaresWinsGaming/WhoDaresWinsGaming.github.io/ip/ip", function(txt) {
				if (txt === null) {
					// An error occurred
					console.error("Oh noes! Can't get the server IP :(");
				} else {
					$("#ip > h1").text(txt);
				}
			});
		
			// Get the time since the last update
			getFileFromServer("https://rawgit.com/WhoDaresWinsGaming/WhoDaresWinsGaming.github.io/ip/time", function(txt) {
				if (txt === null) {
					// An error occurred
					console.error("Oh noes! Can't get the server time :(");
				} else {
					$("#ip > h2").text("last updated " + jQuery.timeago(txt));
				}
			});
  		});
	</script>
	</body>
</html>
